#include <iostream>
#include <string>
using namespace std;

class BankOperations {
public:
    virtual void deposit(double amount) = 0;
    virtual void withdraw(double amount) = 0;
    virtual void checkBalance() = 0;
};

class Account : public BankOperations {
private:
    string name;
    int accountNumber;
    int pin;
    double balance;

public:
    Account(string n, int accNo, int p, double bal) {
        name = n;
        accountNumber = accNo;
        pin = p;
        balance = bal;
    }

    bool verifyPin(int enteredPin) {
        return (enteredPin == pin);
    }

    void deposit(double amount) override {
        balance += amount;
        cout << "₹" << amount << " deposited successfully.\n";
    }

  
    void withdraw(double amount) override {
        if (amount > balance) {
            cout << "Insufficient Balance!\n";
        } else {
            balance -= amount;
            cout << "₹" << amount << " withdrawn successfully.\n";
        }
    }

    void checkBalance() override {
        cout << "Current Balance: ₹" << balance << endl;
    }

    string getName() { return name; }
};

class ATM {
private:
    Account* account; // pointer to Account class

public:
    ATM(Account* acc) {
        account = acc;
    }

    void showMenu() {
        int choice;
        double amount;

        do {
            cout << "\n===== ATM MENU =====\n";
            cout << "1. Check Balance\n";
            cout << "2. Deposit\n";
            cout << "3. Withdraw\n";
            cout << "4. Exit\n";
            cout << "Enter your choice: ";
            cin >> choice;

            switch (choice) {
                case 1:
                    account->checkBalance();
                    break;
                case 2:
                    cout << "Enter amount to deposit: ";
                    cin >> amount;
                    account->deposit(amount);
                    break;
                case 3:
                    cout << "Enter amount to withdraw: ";
                    cin >> amount;
                    account->withdraw(amount);
                    break;
                case 4:
                    cout << "Thank you for using ATM!\n";
                    break;
                default:
                    cout << "Invalid choice! Try again.\n";
            }
        } while (choice != 4);
    }
};

int main() {
    string name;
    int accNo, pin;

    cout << "=== Welcome to ATM Simulator ===\n";
    cout << "Enter your name: ";
    getline(cin, name);
    cout << "Enter Account Number: ";
    cin >> accNo;
    cout << "Set a 4-digit PIN: ";
    cin >> pin;

    Account user(name, accNo, pin, 5000.0); // initial balance ₹5000

    int enteredPin;
    cout << "\nEnter your PIN to continue: ";
    cin >> enteredPin;

    if (user.verifyPin(enteredPin)) {
        ATM atm(&user);
        atm.showMenu();
    } else {
        cout << "Incorrect PIN! Access Denied.\n";
    }

    return 0;
}
